<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>í˜„ì¬ ì ‘ì† ì¤‘ì¸ ì‚¬ìš©ì</title>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        // ğŸ”¥ ì„œë²„ì—ì„œ ìœ ì € ëª©ë¡ ì—…ë°ì´íŠ¸ë¥¼ ë°›ì„ ë•Œ ì‹¤í–‰
        socket.on("update users", (users) => {
            displayUsers(users);
        });

        function displayUsers(users) {
            const userList = document.getElementById("user-list");
            userList.innerHTML = "";

            const today = new Date();
            const formattedDate = today.toISOString().split('T')[0];

            users.forEach(user => {
                const userItem = document.createElement("div");
                userItem.classList.add("user-item");
                userItem.innerHTML = `
                    <span>${user} (${formattedDate})</span>
                    <button class="dm-btn" data-user="${user}">DM</button>
                `;
                userList.appendChild(userItem);
            });

            document.querySelectorAll(".dm-btn").forEach(button => {
                button.addEventListener("click", (event) => {
                    const selectedUser = event.target.getAttribute("data-user");
                    alert(`DM to ${selectedUser} (ê¸°ëŠ¥ì€ ì¶”í›„ êµ¬í˜„)`);
                });
            });
        }
    </script>
</head>
<body>
    <h2>í˜„ì¬ ì ‘ì† ì¤‘ì¸ ì‚¬ìš©ì</h2>
    <div id="user-list">ë¡œë”© ì¤‘...</div>
</body>
</html>
